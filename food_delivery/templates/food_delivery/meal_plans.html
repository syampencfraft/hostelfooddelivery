{% extends 'food_delivery/base.html' %}

{% block title %}Meal Plans - {{ block.super }}{% endblock %}

{% block content %}
    <h2>Our Delicious Meal Plans</h2>

    {% if meal_plans %}
        {% for plan in meal_plans %}
            <div class="meal-plan-card">
                <h3>{{ plan.name }} ({{ plan.get_meal_type_display|capfirst }})</h3>
                <p>{{ plan.description }}</p>
                <p class="price">Price per day: â‚¹{{ plan.price_per_day }}</p>
                <p>Provided by: {{ plan.vendor.username|default:"Admin" }}</p>
                {% if user.is_authenticated and user.user_type == 'resident' %}
                    <a href="{% url 'subscribe' plan.id %}" class="button">Subscribe Now</a>
                {% elif not user.is_authenticated %}
                    <a href="{% url 'login' %}" class="button">Login to Subscribe</a>
                {% else %}
                    <span class="button" style="background-color: #6c757d; cursor: not-allowed;">Subscribe (Resident only)</span>
                {% endif %}
            </div>
        {% endfor %}
    {% else %}
        <p>No meal plans available at the moment. Please check back later!</p>
    {% endif %}
{% endblock %}